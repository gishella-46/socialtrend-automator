openapi: 3.0.3
info:
  title: SocialTrendAutomator
  description: ''
  version: 1.0.0
servers:
  -
    url: 'http://localhost:8000'
paths:
  /api/register:
    post:
      summary: 'Register a new user'
      operationId: registerANewUser
      description: ''
      parameters: []
      responses:
        201:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  user:
                    id: 1
                    name: 'John Doe'
                    email: john@example.com
                  token: 1|xxxxxxxxxxxxx
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: 'John Doe'
                      email:
                        type: string
                        example: john@example.com
                  token:
                    type: string
                    example: 1|xxxxxxxxxxxxx
        422:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: 'The given data was invalid.'
                  errors:
                    email:
                      - 'The email has already been taken.'
                properties:
                  message:
                    type: string
                    example: 'The given data was invalid.'
                  errors:
                    type: object
                    properties:
                      email:
                        type: array
                        example:
                          - 'The email has already been taken.'
                        items:
                          type: string
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: "User's full name."
                  example: 'John Doe'
                  nullable: false
                email:
                  type: string
                  description: "User's email address."
                  example: john@example.com
                  nullable: false
                password:
                  type: string
                  description: "User's password (min 8 characters)."
                  example: password123
                  nullable: false
                password_confirmation:
                  type: string
                  description: 'Password confirmation.'
                  example: password123
                  nullable: false
              required:
                - name
                - email
                - password
                - password_confirmation
      security: []
  /api/login:
    post:
      summary: 'Login user'
      operationId: loginUser
      description: ''
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  user:
                    id: 1
                    name: 'John Doe'
                    email: john@example.com
                  token: 1|xxxxxxxxxxxxx
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: 'John Doe'
                      email:
                        type: string
                        example: john@example.com
                  token:
                    type: string
                    example: 1|xxxxxxxxxxxxx
        422:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: 'The provided credentials are incorrect.'
                properties:
                  message:
                    type: string
                    example: 'The provided credentials are incorrect.'
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  description: "User's email address."
                  example: john@example.com
                  nullable: false
                password:
                  type: string
                  description: "User's password."
                  example: password123
                  nullable: false
              required:
                - email
                - password
      security: []
  /api/upload/callback:
    post:
      summary: 'Handle upload callback from Python service'
      operationId: handleUploadCallbackFromPythonService
      description: ''
      parameters: []
      responses: {  }
      tags:
        - Endpoints
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                scheduled_post_id:
                  type: integer
                  description: 'The <code>id</code> of an existing record in the scheduled_posts table.'
                  example: 20
                  nullable: false
                status:
                  type: string
                  description: ''
                  example: posted
                  nullable: false
                  enum:
                    - posted
                    - failed
                message:
                  type: string
                  description: ''
                  example: non
                  nullable: true
                post_url:
                  type: string
                  description: 'Must be a valid URL.'
                  example: 'http://www.schulist.net/'
                  nullable: true
                error:
                  type: string
                  description: ''
                  example: reprehenderit
                  nullable: true
              required:
                - scheduled_post_id
                - status
      security: []
  /api/metrics:
    get:
      summary: 'Get Prometheus metrics'
      operationId: getPrometheusMetrics
      description: ''
      parameters: []
      responses:
        200:
          description: ''
          content:
            text/plain:
              schema:
                type: string
                example: "# HELP http_requests_total Total number of HTTP requests\n# TYPE http_requests_total counter\nhttp_requests_total{method=\"GET\",route=\"/api\",status=\"200\"} 710\n# HELP http_request_duration_seconds HTTP request duration in seconds\n# TYPE http_request_duration_seconds histogram\nhttp_request_duration_seconds_bucket{le=\"0.005\"} 108\nhttp_request_duration_seconds_bucket{le=\"0.01\"} 252\nhttp_request_duration_seconds_bucket{le=\"0.025\"} 268\nhttp_request_duration_seconds_bucket{le=\"0.05\"} 622\nhttp_request_duration_seconds_bucket{le=\"0.1\"} 732\nhttp_request_duration_seconds_bucket{le=\"0.25\"} 763\nhttp_request_duration_seconds_bucket{le=\"0.5\"} 949\nhttp_request_duration_seconds_bucket{le=\"1\"} 950\nhttp_request_duration_seconds_bucket{le=\"2.5\"} 995\nhttp_request_duration_seconds_bucket{le=\"5\"} 997\nhttp_request_duration_seconds_bucket{le=\"10\"} 996\nhttp_request_duration_seconds_bucket{le=\"+Inf\"} 1000\n# HELP http_errors_total Total number of HTTP errors\n# TYPE http_errors_total counter\nhttp_errors_total{status=\"4xx\"} 13\nhttp_errors_total{status=\"5xx\"} 5\n# HELP upload_operations_total Total upload operations\n# TYPE upload_operations_total counter\nupload_operations_total{status=\"success\"} 83\nupload_operations_total{status=\"failed\"} 4\n"
      tags:
        - Endpoints
      security: []
  /api/health:
    get:
      summary: 'Prometheus metrics endpoint for monitoring'
      operationId: prometheusMetricsEndpointForMonitoring
      description: ''
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  status: healthy
                  service: 'SocialTrend Automator API'
                  version: 1.0.0
                properties:
                  status:
                    type: string
                    example: healthy
                  service:
                    type: string
                    example: 'SocialTrend Automator API'
                  version:
                    type: string
                    example: 1.0.0
      tags:
        - Metrics
      security: []
  /api/schedule:
    post:
      summary: 'Schedule a new post'
      operationId: scheduleANewPost
      description: ''
      parameters: []
      responses:
        201:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: 'Post scheduled successfully'
                  scheduled_post:
                    id: 1
                    user_id: 1
                    social_account_id: 1
                    content: 'Check out this amazing content!'
                    scheduled_at: '2024-12-25 10:00:00'
                    status: pending
                properties:
                  message:
                    type: string
                    example: 'Post scheduled successfully'
                  scheduled_post:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      user_id:
                        type: integer
                        example: 1
                      social_account_id:
                        type: integer
                        example: 1
                      content:
                        type: string
                        example: 'Check out this amazing content!'
                      scheduled_at:
                        type: string
                        example: '2024-12-25 10:00:00'
                      status:
                        type: string
                        example: pending
        422:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: 'The given data was invalid.'
                  errors:
                    scheduled_at:
                      - 'The scheduled at must be a date after now.'
                properties:
                  message:
                    type: string
                    example: 'The given data was invalid.'
                  errors:
                    type: object
                    properties:
                      scheduled_at:
                        type: array
                        example:
                          - 'The scheduled at must be a date after now.'
                        items:
                          type: string
      tags:
        - Scheduling
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                social_account_id:
                  type: integer
                  description: 'ID of the social account.'
                  example: 1
                  nullable: false
                content:
                  type: string
                  description: 'Post content.'
                  example: 'Check out this amazing content!'
                  nullable: false
                scheduled_at:
                  type: string
                  description: 'Scheduled datetime (ISO format, must be in future).'
                  example: '2024-12-25 10:00:00'
                  nullable: false
                media_urls:
                  type: array
                  description: 'optional Array of media URLs.'
                  example:
                    - 'https://example.com/image.jpg'
                  items:
                    type: string
              required:
                - social_account_id
                - content
                - scheduled_at
      security: []
  /api/trends:
    get:
      summary: 'Get trends'
      operationId: getTrends
      description: 'Retrieve paginated list of trends from the database.'
      parameters:
        -
          in: query
          name: page
          description: 'The page number.'
          example: 1
          required: false
          schema:
            type: integer
            description: 'The page number.'
            example: 1
            nullable: false
        -
          in: query
          name: per_page
          description: 'Items per page.'
          example: 20
          required: false
          schema:
            type: integer
            description: 'Items per page.'
            example: 20
            nullable: false
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  trends:
                    current_page: 1
                    data:
                      -
                        id: 1
                        keyword: 'AI Technology'
                        platform: google
                        score: 85
                        created_at: '2024-01-01T00:00:00.000000Z'
                    per_page: 20
                    total: 100
                properties:
                  trends:
                    type: object
                    properties:
                      current_page:
                        type: integer
                        example: 1
                      data:
                        type: array
                        example:
                          -
                            id: 1
                            keyword: 'AI Technology'
                            platform: google
                            score: 85
                            created_at: '2024-01-01T00:00:00.000000Z'
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            keyword:
                              type: string
                              example: 'AI Technology'
                            platform:
                              type: string
                              example: google
                            score:
                              type: integer
                              example: 85
                            created_at:
                              type: string
                              example: '2024-01-01T00:00:00.000000Z'
                      per_page:
                        type: integer
                        example: 20
                      total:
                        type: integer
                        example: 100
        401:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Unauthenticated
                properties:
                  message:
                    type: string
                    example: Unauthenticated
      tags:
        - Trends
      security: []
  /api/user:
    get:
      summary: 'Get authenticated user'
      operationId: getAuthenticatedUser
      description: 'Returns the currently authenticated user information.'
      parameters: []
      responses:
        200:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  user:
                    id: 1
                    name: 'John Doe'
                    email: john@example.com
                    created_at: '2024-01-01T00:00:00.000000Z'
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      name:
                        type: string
                        example: 'John Doe'
                      email:
                        type: string
                        example: john@example.com
                      created_at:
                        type: string
                        example: '2024-01-01T00:00:00.000000Z'
        401:
          description: ''
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Unauthenticated
                properties:
                  message:
                    type: string
                    example: Unauthenticated
      tags:
        - 'User Management'
      security: []
tags:
  -
    name: Authentication
    description: ''
  -
    name: Endpoints
    description: ''
  -
    name: Metrics
    description: ''
  -
    name: Scheduling
    description: ''
  -
    name: Trends
    description: ''
  -
    name: 'User Management'
    description: ''
